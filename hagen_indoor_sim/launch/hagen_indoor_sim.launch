<?xml version="1.0"?>
<launch>
<!-- $(find hagen_indoor_sim)/worlds/warehouse.world -->
  <!-- <arg name="world_name" default="" /> -->
<!-- warehouse simulation environment -->
  <env name="GAZEBO_MODEL_PATH" value="${GAZEBO_MODEL_PATH}:$(find hagen_indoor_sim)/models"/>
  <env name="GAZEBO_RESOURCE_PATH" value="${GAZEBO_RESOURCE_PATH}:$(find hagen_indoor_sim)/models"/>
   <!-- <env name="GAZEBO_MODEL_PATH" value="$(find hagen_gazebo)/models:$(optenv GAZEBO_MODEL_PATH)"/> -->

  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(find hagen_indoor_sim)/worlds/warehouse_empty.world"/>
    <!-- <arg name="world_name" value="$(find hagen_indoor_sim)/worlds/warehouse.world"/> -->
    <arg name="paused" value="false"/>
    <arg name="gui" value="true"/> 
  </include>
 
  <arg name="x_pos" default="5.029"/>
  <arg name="y_pos" default="13.538"/>
  <arg name="z_pos" default="0"/> 

  <arg name="front_laser" default="true" />
  <arg name="default_config" value="front_laser" if="$(arg front_laser)" />
  <arg name="default_config" value="base" unless="$(arg front_laser)" />
  <arg name="joystick" default="false" />

  <arg name="config" default="front_laser" /> 
  <arg name="scan_topic" default="/front/scan" />
  <!-- <arg name="scan_topic" default="/lidar_wamv/points" /> -->
  
  <include file="$(find hagen_gazebo)/launch/spawn_hagen.launch">
    <arg name="x" value="5.029" />
    <arg name="y" value="13.538" />
    <arg name="z" value="0.0" />
    <arg name="yaw" value="0" />
    <arg name="config" value="$(arg config)" />
    <arg name="joystick" value="$(arg joystick)" />
  </include>

  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="log">
    <remap from="scan" to="$(arg scan_topic)"/>
    <param name="maxRange" value="10"/>
    <param name="xmin" value="-12"/>
    <param name="ymin" value="-12"/>
    <param name="xmax" value="12"/>
    <param name="ymax" value="12"/>
    <param name="delta" value="0.05"/>
    <param name="particles" value="4"/>
    <param name="temporalUpdate" value="1.0"/>
    <param name="angularUpdate" value="0.3"/>
    <param name="linearUpdate" value="0.3"/>
    <param name="map_update_interval" value="2.0"/>
  </node>

  <!-- <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hagen_indoor_sim)/rviz/navigation.rviz" output="screen"/> -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find warehouse_simulation)/rviz/navigation.rviz" output="screen"/>

  <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="trajectory_server" >
      <param name="/target_frame_name" value="map" />
      <param name="/source_frame_name" value="base_link" />
      <param name="/trajectory_update_rate" value="10.0" />
      <param name="/trajectory_publish_rate" value="10.0" />
  </node>

  <!-- <include file="$(find hagen_indoor_sim)/launch/planner.launch"></include> -->

</launch>