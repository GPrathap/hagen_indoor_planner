<?xml version="1.0"?>
<launch>

  <arg name="robot_id" default="1"/>
  <arg name="tf_prefix" value="robot$(arg robot_id)"/>
  <arg name="use_ct" default="false"/>
  <arg name="use_update_task" default="true"/>
   <!-- <include file="$(find gazebo_worlds_oru)/launch/basement_map_server.launch" /> -->
  
  <node pkg="tf" type="static_transform_publisher" name="origin_broadcaster" 
    args="0 0 0 0 0 0 /world map 100" />

  <!-- <node name="map_server" pkg="map_server" type="map_server" args="$(find gazebo_worlds_oru)/maps/basement.yaml"/> -->

  <group ns="$(arg tf_prefix)">
    <param name="tf_prefix" value="$(arg tf_prefix)" />
    <node pkg="orunav_vehicle_execution" type="orunav_vehicle_execution_node" name="orunav_vehicle_execution_node" output="screen">
      <param name="model"
             value="CiTiTruck_Expanded10+20_16_1_4.0_0.2.reduced" />
      <param name="motion_primitives_directory"
             value="$(find orunav_motion_planner)/Primitives/" />
      <param name="lookup_tables_directory"
             value="$(find orunav_motion_planner)/LookupTables/" />
      <param name="min_incr_path_dist" value="0.2" />
      <param name="visualize" value="true" />
       <param name="use_ct" value="false" />
       <param name="multiple_vehicles" value="true" />
      
         <param name="visualize" value="true" />
      <param name="fast_max_vel" value="0.5"/>
      <param name="fast_max_rotational_vel" value="0.3"/>
      <param name="fast_max_acc" value="0.3"/>
      <param name="fast_max_steering_angle_vel" value="0.6"/>
      <param name="fast_creep_speed" value="0."/>
      <param name="fast_creep_distance" value="0."/>
      
      <param name="slow_max_vel" value="0.05"/>
      <param name="slow_max_rotational_vel" value="0.3"/>
      <param name="slow_max_acc" value="0.1"/>
      <param name="slow_max_steering_angle_vel" value="0.6"/>
      <param name="slow_creep_speed" value="0."/>
      <param name="slow_creep_distance" value="0."/>
      <param name="load_type" value="1" />
      <param name="model_type" value="2" />
      <param name="visualize" value="false" />
    </node>

    <node pkg="orunav_mpc" type="controller_node" name="controller"
          output="screen">
      <param name="robot_id" value="$(arg robot_id)" />
      <remap from="/$(arg tf_prefix)/cmd_vel"
             to="/$(arg tf_prefix)/controller/cmd_vel" />
      <remap from="controller/commands"
             to="control/controller/commands" />
      <remap from="controller/reports"
             to="control/controller/reports" />
      <remap from="controller/trajectories"
             to="control/controller/trajectories" />
    </node>
  </group>
</launch>
